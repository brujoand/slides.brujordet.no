<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <title>JavaZone 2020</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../.reveal.js/dist/reset.css">
  <link rel="stylesheet" href="../.reveal.js/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #cccccc; background-color: #222222; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ffcfaf; } /* Alert */
    code span.an { color: #7f9f7f; font-weight: bold; } /* Annotation */
    code span.at { } /* Attribute */
    code span.bn { color: #dca3a3; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #f0dfaf; } /* ControlFlow */
    code span.ch { color: #dca3a3; } /* Char */
    code span.cn { color: #dca3a3; font-weight: bold; } /* Constant */
    code span.co { color: #7f9f7f; } /* Comment */
    code span.cv { color: #7f9f7f; font-weight: bold; } /* CommentVar */
    code span.do { color: #7f9f7f; } /* Documentation */
    code span.dt { color: #dfdfbf; } /* DataType */
    code span.dv { color: #dcdccc; } /* DecVal */
    code span.er { color: #c3bf9f; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #c0bed1; } /* Float */
    code span.fu { color: #efef8f; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #7f9f7f; font-weight: bold; } /* Information */
    code span.kw { color: #f0dfaf; } /* Keyword */
    code span.op { color: #f0efd0; } /* Operator */
    code span.ot { color: #efef8f; } /* Other */
    code span.pp { color: #ffcfaf; font-weight: bold; } /* Preprocessor */
    code span.sc { color: #dca3a3; } /* SpecialChar */
    code span.ss { color: #cc9393; } /* SpecialString */
    code span.st { color: #cc9393; } /* String */
    code span.va { } /* Variable */
    code span.vs { color: #cc9393; } /* VerbatimString */
    code span.wa { color: #7f9f7f; font-weight: bold; } /* Warning */
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="../.reveal.js/dist/theme/brujoand.css" id="theme">
</head>
<body>
  <div class="reveal">
    <div class="slides">

<section id="title-slide">
  <h1 class="title">JavaZone 2020</h1>
</section>

<section id="section" class="slide level1" data-background-image="static/soria_moria.jpg" style="color:LightGray">
<h1 data-background-image="static/soria_moria.jpg" style="color:LightGray"></h1>
<h2 class="slide:" style="color:Black" id="building-a-delivery-platform">BUILDING A DELIVERY PLATFORM</h2>
<p></br> by </br> Anders Brujordet</p>
</section>
<section id="section-1" class="slide level1" data-background-image="static/soria_moria_faded.jpg">
<h1 data-background-image="static/soria_moria_faded.jpg"></h1>
<h2 id="topics">Topics</h2>
<ol type="1">
<li>What is a Delivery Platform?</li>
<li>How do we build one?</li>
</ol>
</section>
<section id="section-2" class="slide level1" data-background-image="static/containers_faded.jpg">
<h1 data-background-image="static/containers_faded.jpg"></h1>
<h2 id="what-is-a-delivery-platform">What is a Delivery Platform?</h2>
<aside class="notes">
<ul>
<li>This is a bit complicated</li>
<li>Let’s start by looking at how I stumbled into building one</li>
</ul>
</aside>
</section>
<section class="slide level1">

<h2 id="getting-my-toes-wet">Getting my toes wet</h2>
<ul>
<li>Company: Knowit Objectnet</li>
<li>Developers: 50+</li>
<li>Project: Public Sector Integration Bus</li>
</ul>
<aside class="notes">
<ul>
<li>10 years ago I was a Java consultant at Knowit, one of my first jobs</li>
<li>50 devs in company, 10 or so on my team.</li>
<li>Working on integration bus for the municipality.</li>
<li>CI: Hudson, Monitoring: Nagios, early adopters Github Enterprise</li>
<li>CD: started slow, handholding, but then Puppet + some ruby</li>
<li>A great first experience as a developer</li>
</ul>
</aside>
</section>
<section class="slide level1">

<h2 id="what-enabled-this">What enabled this?</h2>
<aside class="notes">
<ul>
<li>First off; I had no idea that this was weird in 2011, public sector</li>
<li>Mostly geeks who loved their job</li>
<li>A few key people drove this specific process</li>
<li><strong>They had support from management</strong></li>
<li>This just made sense to the company</li>
<li>Even the financial chief implemented a coding challenge in excel during a company trip.</li>
</ul>
</aside>
</section>
<section class="slide level1">

<h2 id="scalaing-up">Scal(a)ing up</h2>
<ul>
<li>Company: Finn.no</li>
<li>Developers: 150+</li>
<li>Project: Public and Private REST APIs</li>
</ul>
<aside class="notes">
<ul>
<li>After working 3 years on Java, I wanted to learn more Scala</li>
<li>Finn had a really solid Scala team working on their APIs</li>
<li>CI: Bamboo, CD: Puppet, Metrics: Grafana, Logging: ELK stack</li>
<li>Lot’s of tools, and homemade deployment web UI. Nice</li>
<li>I got to create CI for Varnish</li>
</ul>
</aside>
</section>
<section class="slide level1">

<h2 id="what-enabled-this-1">What enabled this?</h2>
<aside class="notes">
<ul>
<li>Lot of the same culture as Knowit</li>
<li>The organization was used to change</li>
<li>Strong product organization that pushed for innovation</li>
<li>Strong infra team and some eager Developers</li>
<li><strong>They had support from management and product</strong></li>
</ul>
</aside>
</section>
<section class="slide level1">

<h2 id="entering-the-big-leagues">Entering the big leagues</h2>
<ul>
<li>Company: Schibsted</li>
<li>Developers: 1500+</li>
<li>Project: Schibsteds Global CI/CD platform</li>
</ul>
<aside class="notes">
<ul>
<li>Finally I joined Schibsted</li>
<li>We created a global Delivery Platform</li>
<li>CI: Travis, CD: Spinnaker, Metrics: DataDog, Logging: Sumologic</li>
<li>We had a more active approach to tooling.</li>
<li>On prem Travis, active partners on Spinnaker</li>
<li>Many other teams were creating many useful tools</li>
<li>Managed k8s clusters, custom secret management etc</li>
<li>The approach was inspired by Netflix, Google, Twitter etc.</li>
<li>Huge collaborative effort</li>
</ul>
</aside>
</section>
<section class="slide level1">

<h2 id="what-enabled-this-2">What enabled this?</h2>
<aside class="notes">
<ul>
<li>As you might now, Schibsted = Many similar marketplaces and news sites</li>
<li>Naturally they have similar needs</li>
<li>Daughter companies could save money by sharing the cost</li>
<li>Strong infra organization, and development eager teams</li>
<li><strong>They had support from top level leadership</strong></li>
<li>Exceptionally hungry culture, very senior engineers</li>
</ul>
</aside>
</section>
<section class="slide level1">

<h2 id="the-common-culture">The common culture</h2>
<ul>
<li>Strong engineers</li>
<li>Focus on best practices and improvements</li>
<li>Support from management</li>
</ul>
<aside class="notes">
<ul>
<li>Strong engineers</li>
<li>Focus on best practices and continuous improvements</li>
<li>Support from management</li>
</ul>
</aside>
</section>
<section class="slide level1">

<h2 id="the-common-benefits">The common benefits</h2>
<ul>
<li>CI/CD is fully automated</li>
<li>Shorter feedback loops</li>
<li>Easier to visualize current status</li>
</ul>
<aside class="notes">
<ul>
<li>Fully automated -&gt; less distractions -&gt; Happy developers -&gt; Productivity</li>
<li>Short feedback loops -&gt; less bugs, faster fixes -&gt; Productivity</li>
<li>Insight -&gt; Easier to argue for fixing tech debt</li>
</ul>
</aside>
</section>
<section class="slide level1">

<h2 id="so-were-these-delivery-platforms">So were these Delivery Platforms?</h2>
<img data-src="static/devops_cloud.png" title="fig:" class="stretch" alt="DevOps_cloud" />
<aside class="notes">
<ul>
<li>Yes and no</li>
<li>Knowit, Finn and Schibsted had all the right tools</li>
<li>The difference is is how these tools are connected</li>
</ul>
</aside>
</section>
<section class="slide level1">

<h2 id="lets-break-it-down">Let’s break it down</h2>
<ul>
<li>Development loop</li>
<li>Deployment loop</li>
<li>Monitoring loop</li>
</ul>
<aside class="notes">
<ul>
<li>We basically have three loops</li>
</ul>
</aside>
</section>
<section class="slide level1">

<h2 id="development-loop">Development loop</h2>
<img data-src="static/development_loop.png" class="stretch" />
<aside class="notes">
<ul>
<li>We push some code change</li>
<li>We build it</li>
<li>We test it</li>
<li>Validate it, static code analysis, security audit</li>
<li>If all good, upload</li>
<li>If not, repeat the loop</li>
</ul>
</aside>
</section>
<section class="slide level1">

<h2 id="deployment-loop">Deployment loop</h2>
<img data-src="static/deployment_loop.png" class="stretch" />
<aside class="notes">
<ul>
<li>We start with the development loop</li>
<li>We upload the built artifact</li>
<li>Integration tests or manual tests</li>
<li>Verify based on data or manual action</li>
<li>Deploy to production</li>
</ul>
</aside>
</section>
<section class="slide level1">

<h2 id="monitoring-loop">Monitoring loop</h2>
<img data-src="static/monitoring_loop.png" class="stretch" />
<aside class="notes">
<ul>
<li>We started with development loop</li>
<li>Then the deployment loop</li>
<li>Now we monitor and watch for problems</li>
<li>This could be runtime errors, vulnerabilities etc..</li>
<li>Reported by metrics, logging, users or other tools</li>
<li>When a problem occurs, we alert, maybe we rollback</li>
<li>And we go back to the development loop</li>
</ul>
</aside>
</section>
<section class="slide level1">

<h2 id="the-delivery-automation-system">The Delivery Automation System</h2>
<img data-src="static/delivery_loop.png" class="stretch" />
<aside class="notes">
<ul>
<li>So basically we have a loop of loops</li>
<li>This is what I call the Delivery Automation System</li>
<li>Everything is chained together nicely</li>
<li>All the steps are automated from src to prod</li>
<li>Basically what Knowit &amp; Finn had</li>
<li>This can appear as a black box, that ‘fixes CI/CD’</li>
</ul>
</aside>
</section>
<section class="slide level1">

<h2 id="when-a-das-is-perfect">When a DAS is perfect</h2>
<aside class="notes">
<ul>
<li>For Knowit a DAS was perfect</li>
<li>Mostly Java, monorepo with all the cod, same deployment target</li>
<li>Finn had a more diversity and their DAS was starting to get a lot of additions.</li>
<li>They were basically in a process of creating a Delivery Platform</li>
<li>For Schibsted, the DAS just couldn’t work. To much diversity.</li>
</ul>
</aside>
</section>
<section class="slide level1">

<h2 id="when-a-das-falls-short">When a DAS falls short</h2>
<aside class="notes">
<ul>
<li>When the needs of the teams vary a lot</li>
<li>Different languages, build tools, artifact types, deployment targets</li>
<li>Backend, Machine Learning, search applications, frontend, mobile etc..</li>
<li>Finn had started to feel some of this, and made additions to the DAS</li>
<li>But every addition, makes the DAS more complex.</li>
<li>Eventually they moved to a Delivery Platform</li>
<li>So let’s look at how that could be done</li>
</ul>
</aside>
</section>
<section class="slide level1">

<h2 id="from-a-das-to-platform">From a DAS to Platform</h2>
<img data-src="static/blackbox_1.png" class="stretch" />
<aside class="notes">
<ul>
<li>There are different ways this could be connected</li>
<li>Maybe the DAS checks for new code, or may there is a webhook.</li>
<li>But we need to make sure that there is a uniform interface here</li>
</ul>
</aside>
</section>
<section class="slide level1">

<h2 id="from-a-das-to-platform-1">From a DAS to Platform</h2>
<img data-src="static/blackbox_2.png" class="stretch" />
<aside class="notes">
<ul>
<li>Let’s say that we use Github for source code</li>
<li>We define an integration rule that whet source code wants to be built, our black box must get a webhook.</li>
</ul>
</aside>
</section>
<section class="slide level1">

<h2 id="from-a-das-to-platform-2">From a DAS to Platform</h2>
<img data-src="static/blackbox_3.png" class="stretch" />
<aside class="notes">
<ul>
<li>Again let’s assume we have Jenkins for builds</li>
<li>Jenkins should now own the webhook interface from source code</li>
<li>And our next rule is that build systems uploads a semantically versioned artifact</li>
</ul>
</aside>
</section>
<section class="slide level1">

<h2 id="from-a-das-to-platform-3">From a DAS to Platform</h2>
<img data-src="static/blackbox_4.png" class="stretch" />
<aside class="notes">
<ul>
<li>Okay, so let’s use Nexus for Artifacts</li>
<li>And our next rule is that when a new artifact is uploaded, we send an event to trigger deployment.</li>
<li>Our black box now only deals with deployment</li>
</ul>
</aside>
</section>
<section class="slide level1">

<h2 id="from-a-das-to-platform-4">From a DAS to Platform</h2>
<img data-src="static/blackbox_5.png" class="stretch" />
<aside class="notes">
<ul>
<li>finally, we add Spinnaker for deployments</li>
<li>and our black box is gone</li>
<li>Now we only have a set of services, that are bound by very clear rules</li>
<li>In theory, this means that any part of our tooling can be replaced, as long as the new tool abides by these rules.</li>
<li>So let’s onboard some teams from other parts of our organization.</li>
</ul>
</aside>
</section>
<section class="slide level1">

<h2 id="from-a-das-to-chaos">From a DAS to chaos?</h2>
<img data-src="static/blackbox_6.png" class="stretch" />
<aside class="notes">
<ul>
<li>One team using stash, which is fine as they hook into Jenkins.</li>
<li>One team uses Gitlab, again fine as they upload to Nexus.</li>
<li>One team is deploying to AWS, another to Bare Metal all fine.</li>
<li>And in our case of Spinnaker, we can even have a unified UI that visualizes all of these different build pipelines.</li>
<li>Instead of a complex black box, we have simple rules that allow for complex graphs.</li>
<li>Change is now a much much easier.</li>
</ul>
</aside>
</section>
<section class="slide level1">

<h2 id="the-magic-is-in-the-glue-not-the-tools">The magic is in the glue, not the tools</h2>
<aside class="notes">
<ul>
<li>A Delivery Platform doesn’t care which build tool you use</li>
<li>And neither should you.</li>
<li>We want to be able to extend upon these rules, not the specific tools</li>
</ul>
</aside>
</section>
<section class="slide level1">

<table>
<thead>
<tr class="header">
<th>Platform</th>
<th>DAS</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Opt-in</td>
<td>Opt-out</td>
</tr>
<tr class="even">
<td>Loose coupling</td>
<td>Tight coupling</td>
</tr>
<tr class="odd">
<td>Individual pipelines</td>
<td>Shared pipelines</td>
</tr>
<tr class="even">
<td>Self served</td>
<td>Traditional SaaS</td>
</tr>
<tr class="odd">
<td>Dedicated Team</td>
<td>Collective effort</td>
</tr>
</tbody>
</table>
<aside class="notes">
<ul>
<li>At the bottom we see one of the main problems here</li>
<li>The DAS is basically a SaaS, but it’s usually not owned by one team</li>
<li>Usually it’s a collaborative effort, which means it often gets neglected</li>
<li>The platform could be used as a Delivery Automation System by relying only on the Default Pipeline</li>
</ul>
</aside>
</section>
<section class="slide level1">

<h2 id="a-delivery-platform-is..">A Delivery Platform is..</h2>
<p>.. a <strong>customizable</strong> set of <strong>services</strong> that can be <strong>composed</strong> through <strong>well defined rules</strong> into a <strong>pipeline</strong> that builds, verifies and deploys source code in a <strong>secure</strong>, <strong>predictable</strong> and <strong>repeatable</strong> manner with <strong>sane defaults</strong>.</p>
<aside class="notes">
<ul>
<li>That’s probably the longest introduction I’ve had to any presentation</li>
<li>But this talk doesn’t make sense if we don’t have the same definition of what a Delivery Platform is.</li>
<li>And especially how it relates to the more common Delivery Automation System.</li>
</ul>
</aside>
</section>
<section id="section-3" class="slide level1" data-background-image="static/soria_moria_faded.jpg">
<h1 data-background-image="static/soria_moria_faded.jpg"></h1>
<h2 id="building-a-delivery-platform-1">Building a Delivery Platform</h2>
<h3 id="the-profit-and-pain">The profit and pain</h3>
<aside class="notes">
<ul>
<li>So finally, how do we build one?</li>
</ul>
</aside>
</section>
<section id="section-4" class="slide level1" data-background-image="static/map_help.jpg" style="color:black">
<h1 data-background-image="static/map_help.jpg" style="color:black"></h1>
<aside class="notes">
<ul>
<li>First we need to figure out, where we are</li>
<li>What is the current situation in our company?</li>
<li>What works, what doesn’t?</li>
<li>What is currently causing the most pain?</li>
<li>Where can we add the most value?</li>
<li>Who can help us with this?</li>
<li>Do we have backing to do this?</li>
</ul>
</aside>
</section>
<section id="section-5" class="slide level1" data-background-image="static/map_help_faded.jpg">
<h1 data-background-image="static/map_help_faded.jpg"></h1>
<h2 id="if-lost-ask-for-help">If lost, ask for help</h2>
<aside class="notes">
<ul>
<li>Talk to a few people from everywhere</li>
<li>Developers, Infrastructure, Managers, Product, Maybe even customers?</li>
<li>What are their concerns, pain points with regards to delivery?</li>
<li>Where do they feel that we are?</li>
<li>Do they all agree? Usually, not.</li>
</ul>
</aside>
</section>
<section id="section-6" class="slide level1" data-background-image="static/map_help_faded.jpg">
<h1 data-background-image="static/map_help_faded.jpg"></h1>
<h2 id="interviews-will-give-you-vital-information">Interviews will give you vital information</h2>
<aside class="notes">
<ul>
<li>Which components we need</li>
<li>Where are we loosing the most time and resources</li>
<li>What would give the most benefit?</li>
<li>Identify was teams can collaborate, and share tooling</li>
<li>Identify and help mitigate political/personal issues between teams</li>
</ul>
</aside>
</section>
<section id="section-7" class="slide level1" data-background-image="static/map_help_faded.jpg">
<h1 data-background-image="static/map_help_faded.jpg"></h1>
<h2 id="so-am-i-a-team-coach-now">So am I a team coach now?</h2>
<p>Yes, kind of..</p>
<aside class="notes">
<ul>
<li>If the teams are not cooperating you will be blocked by discussions and support.</li>
<li>If teams are collaborating, they will support each other.</li>
<li>Support and on boarding is by far the most expensive work</li>
<li>The problems are usually very similar, and simple to fix</li>
<li>The overhead of constantly context switching is huge</li>
<li>Most people just glance at documentation, and then ask for help.</li>
<li>Make sure they have friendly teams they can talk to.</li>
</ul>
</aside>
</section>
<section id="section-8" class="slide level1" data-background-image="static/map_help_faded.jpg">
<h1 data-background-image="static/map_help_faded.jpg"></h1>
<h2 id="get-the-data">Get the data</h2>
<aside class="notes">
<ul>
<li>Start gathering metrics to visualize what you’ve learned from the interviews</li>
<li>Did the metrics confirm or deny what you learned?</li>
<li>You might find ticking bombs, that we have to fix ASAP.</li>
<li>Or things that work really well. We need to keep those.</li>
<li>Let’s put this data in a dashboard.</li>
</ul>
</aside>
</section>
<section id="section-9" class="slide level1" data-background-image="static/map_help_faded.jpg">
<h1 data-background-image="static/map_help_faded.jpg"></h1>
<h2 id="dashboards-make-it-official">Dashboards make it official</h2>
<p>But be careful..</p>
<aside class="notes">
<ul>
<li>I tend to use the Smashing framework early on, as it’s easy to hack</li>
<li>Show things that give value, but focus on what can be improved.</li>
<li>One episode, where we added data from SonarQube. It showed a lot of tech debt. SonarQube had been running for over a year, but now that it was visualized an engineer took it upon himself to fix almost 200 hours of tech debt in a couple of days.</li>
<li>Dashboards can help us argue the case for spending resources on tech debt like this, but it can’t measure performance, or skill.</li>
<li>This problem warrants it’s own presentation.</li>
<li>Suffice to say, that what they see they will measure.</li>
</ul>
</aside>
</section>
<section id="the-golden-path" class="slide level1" data-background-image="static/golden_path.jpg">
<h1 data-background-image="static/golden_path.jpg">The Golden Path</h1>
</section>
<section id="section-10" class="slide level1" data-background-image="static/golden_path_faded.jpg">
<h1 data-background-image="static/golden_path_faded.jpg"></h1>
<h2 id="the-open-platform">The open platform</h2>
<p>Just provide the pieces and let everyone compose their own pipelines</p>
<aside class="notes">
<ul>
<li>We could have just provided a bunch of services for people to use.</li>
<li>Freedom to choose from all the tools</li>
<li>Could be nice for experienced DevOps teams</li>
<li>Less dependent on the Platform team</li>
<li>Huge cost in on-boarding for inexperienced teams</li>
<li>Basically what AWS does</li>
</ul>
</aside>
</section>
<section id="section-11" class="slide level1" data-background-image="static/golden_path_faded.jpg">
<h1 data-background-image="static/golden_path_faded.jpg"></h1>
<h2 id="the-golden-path-1">The Golden Path</h2>
<p>Provide a default path with batteries included</p>
<aside class="notes">
<ul>
<li>Instead we should provide a default path with batteries included</li>
<li>Teams are free to work on code, rather than configuration</li>
<li>Teams are still free to customize their tooling</li>
<li>Security of having support</li>
<li>On-boarding new engineers is much easier</li>
</ul>
</aside>
</section>
<section id="section-12" class="slide level1" data-background-image="static/golden_path_faded.jpg">
<h1 data-background-image="static/golden_path_faded.jpg"></h1>
<h2 id="the-golden-path-a-shopping-list">The Golden Path; a shopping list</h2>
<ul>
<li>A visual Pipeline</li>
<li>Managed secrets &amp; environment variables</li>
<li>Hardened base images</li>
<li>Monitoring with default metrics &amp; logging</li>
<li>Support</li>
</ul>
<aside class="notes">
<ul>
<li>A visual Pipeline, like spinnaker or Gitlab or Tekton</li>
<li>Managed secrets &amp; environment variables</li>
<li>Hardened base images</li>
<li>Monitoring with default metrics &amp; logging</li>
<li>Support</li>
<li>Stray from the path at will, but you must get back on your own.</li>
<li>Let’s look at a simple example</li>
</ul>
</aside>
</section>
<section class="slide level1">

<h2 id="example.yml">example.yml</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true"></a><span class="at">  </span><span class="fu">type</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;Java&#39;</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true"></a><span class="at">  </span><span class="fu">application_name</span><span class="kw">:</span><span class="at"> </span><span class="st">&#39;dogfood-service&#39;</span></span></code></pre></div>
<aside class="notes">
<ul>
<li>So let’s opt in by adding this example.yml file</li>
<li>We require a type and a name for the app, that’s it.</li>
<li>When we commit this file, a simple jenkins build is configured, along with deployment of the artifact and a container to k8s.</li>
<li>Everything we don’t see here is set by default.</li>
</ul>
</aside>
</section>
<section id="is-nice" class="slide level1">
<h1>is nice 👍</h1>
<p>yes?</p>
<aside class="notes">
<ul>
<li>But how can we extend this?</li>
<li>Maybe I want to disable the SonarQube check?</li>
<li>Or change the health check url?</li>
</ul>
</aside>
</section>
<section class="slide level1">

<h2 id="example.yml-1">example.yml</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a><span class="at">  …</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true"></a><span class="at">  </span><span class="fu">healthchecks</span><span class="kw">:</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true"></a><span class="at">    </span><span class="fu">liveness</span><span class="kw">:</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true"></a><span class="at">      </span><span class="fu">http</span><span class="kw">:</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true"></a><span class="at">        </span><span class="fu">path</span><span class="kw">:</span><span class="at"> /_/custom_health_path</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true"></a><span class="at">  </span><span class="fu">ingress</span><span class="kw">:</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">host</span><span class="kw">:</span><span class="at"> dogfood-custom.ingress.local</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true"></a><span class="at">  </span><span class="fu">ports</span><span class="kw">:</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">target_port</span><span class="kw">:</span><span class="at"> </span><span class="dv">6969</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true"></a><span class="at">  </span><span class="fu">replicas</span><span class="kw">:</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true"></a><span class="at">    </span><span class="fu">maximum</span><span class="kw">:</span><span class="at"> </span><span class="dv">13</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true"></a><span class="at">    </span><span class="fu">minimum</span><span class="kw">:</span><span class="at"> </span><span class="dv">37</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true"></a><span class="at">  </span><span class="fu">SonarQube</span><span class="kw">:</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true"></a><span class="at">    </span><span class="kw">-</span><span class="at"> </span><span class="fu">enabled</span><span class="kw">:</span><span class="at"> </span><span class="ch">false</span></span></code></pre></div>
<aside class="notes">
<ul>
<li>This was actually a part of a k8s template</li>
<li>So we can drop straight into k8s. With full access to it’s powers.</li>
<li>This is basically Fiaas, that we used at Finn.</li>
<li>For a k8s shop, this makes sense.</li>
<li>You might need a different way of doing this.</li>
<li>But the idea works in most cases.</li>
</ul>
</aside>
</section>
<section class="slide level1">

<h2 id="convention-over-configuration">Convention over configuration</h2>
<ul>
<li>Driving on an new road?</li>
<li>Eating in a new restaurant?</li>
<li>Talking to a new person?</li>
</ul>
<aside class="notes">
<ul>
<li>The trick here is to use conventions, and sane defaults</li>
<li>What if you had to check a manual before: driving, eating or talking to someone?</li>
<li>Instead we rely on conventions</li>
<li>We know that driving on a road A is similar to most roads.</li>
<li>This saves time, and makes us feel safe.</li>
</ul>
</aside>
</section>
<section class="slide level1">

<h2 id="convention-over-configuration-1">Convention over configuration</h2>
<p>It’s not only for the users</p>
<aside class="notes">
<ul>
<li>It makes a world of difference when:</li>
<li>Integrating tools</li>
<li>Figuring out what belongs where</li>
<li>Configuring custom pipelines</li>
<li>Setting up dashboards</li>
<li>Naming conventions, between Github and NexusIQ for instance</li>
<li>You can just follow the name</li>
<li>You know how we name things, so you have guidance.</li>
</ul>
</aside>
</section>
<section id="section-13" class="slide level1" data-background-image="static/challenge_conventions.jpg">
<h1 data-background-image="static/challenge_conventions.jpg"></h1>
<aside class="notes">
<ul>
<li>But don’t just blindly follow</li>
<li>Challenge the conventions, that’s how they evolve</li>
</ul>
</aside>
</section>
<section id="section-14" class="slide level1" data-background-image="static/challenge_conventions_faded.jpg">
<h1 data-background-image="static/challenge_conventions_faded.jpg"></h1>
<p>Conventions should be guides, not restrictions</p>
</section>
<section id="section-15" class="slide level1" data-background-image="static/winner.jpg">
<h1 data-background-image="static/winner.jpg"></h1>
<aside class="notes">
<ul>
<li>So, how do we know that we are winning?</li>
<li>We have to define our success metrics</li>
<li>interviews gave us status quo</li>
<li>We know a bit about how to layout our platform</li>
<li>But where do we want to go with this exactly?</li>
</ul>
</aside>
</section>
<section id="section-16" class="slide level1" data-background-image="static/winner_faded.jpg">
<h1 data-background-image="static/winner_faded.jpg"></h1>
<h2 id="defining-success-and-failure">Defining success (and failure)</h2>
<ul>
<li>Desired state</li>
<li>Incremental small goals</li>
<li>Monitor for red flags</li>
</ul>
<aside class="notes">
<ul>
<li>We should define a desired state</li>
<li>We reach this state by creating small well defined goals, to keep us motivated</li>
<li>While we watch for red flags</li>
<li>A Delivery Platform is a constant work in progress</li>
<li>There is no real end goal, but rather a moving target ‘desired state’</li>
<li>If it stops changing it’s not done, it’s dying</li>
</ul>
</aside>
</section>
<section id="section-17" class="slide level1" data-background-image="static/winner_faded.jpg">
<h1 data-background-image="static/winner_faded.jpg"></h1>
<h2 id="monitor-red-flags">Monitor red flags</h2>
<ul>
<li>Teams disabling features</li>
<li>Lack of team metrics improvement</li>
</ul>
<aside class="notes">
<ul>
<li>So I said, monitor red flags. What could those be?</li>
<li>Teams start disabling a certain feature, why? Is it not working/helping?</li>
<li>Teams have no improvement on metrics, are they not using the tooling?</li>
<li>This is not an insult or rebellion</li>
<li>These are signs that the platform isn’t helping them</li>
<li>We need to understand why and adapt</li>
</ul>
</aside>
</section>
<section class="slide level1">

<h2 id="success-isnt-just-about-what-developers-want">Success isn’t just about what developers want</h2>
<aside class="notes">
<ul>
<li>The organization also needs us to focus on security, which is often overlooked</li>
<li>People tend to think they have okay security, without any actual data or proof</li>
<li>Like Mike Tyson says, “Everybody has a plan until they get punched in the face”</li>
<li>We can easily add security checks and alerts, and even automatic pull request for bumping dependencies.</li>
<li>We can maintain hardened base images.</li>
<li>We can monitor for services exposing data without authentication</li>
</ul>
</aside>
</section>
<section id="section-18" class="slide level1" data-background-image="static/lowhanging_fruit.jpg">
<h1 data-background-image="static/lowhanging_fruit.jpg"></h1>
<aside class="notes">
<ul>
<li>So, we have our status quo, we have our ‘desired state’</li>
<li>How do we start actually doing this?</li>
<li>Start with the low hanging fruits, your own team.</li>
<li>Then smaller, newer teams with less legacy</li>
<li>Usually they have less automation in place, maybe never even deployed to production?</li>
<li>They are often happy to get help, as they tend to be stretched for resources</li>
</ul>
</aside>
</section>
<section id="section-19" class="slide level1" data-background-image="static/lowhanging_fruit_faded.jpg">
<h1 data-background-image="static/lowhanging_fruit_faded.jpg"></h1>
<blockquote>
<p>Here I am wearing myself out to get a bunch of sour grapes that are not worth gaping for.</p>
</blockquote>
<p>- Aesop’s Fables</p>
<aside class="notes">
<ul>
<li>The story goes, that the fox eyed the biggest grapes hanging on the highest vine.</li>
<li>When he couldn’t reach them he belittled the grapes, as sour and not worth his time</li>
<li>This is a classic mistake of over-reaching, and it’s easy to do.</li>
<li>As on-boarding high profile teams gives the platform publicity and validation</li>
<li>But the stakes are high, and these teams don’t have time to spend on your WIP platform</li>
<li>We need to be stable for these teams to onboard</li>
</ul>
</aside>
</section>
<section id="section-20" class="slide level1" data-background-image="static/lowhanging_fruit_faded.jpg">
<h1 data-background-image="static/lowhanging_fruit_faded.jpg"></h1>
<h2 id="ask-for-volunteers-instead">Ask for volunteers instead</h2>
<p>Or prepare for a challenge!</p>
<aside class="notes">
<ul>
<li>In the early phases of creating the first proper platform at Schibsted</li>
<li>We were instructed to on-board certain teams</li>
<li>This sometimes worked, but also failed <em>hard</em> at times</li>
<li>Some of them didn’t really need our tooling.</li>
<li>We got stressed as we saw this would fail, and started making demands</li>
<li>This gave the impression that we could give them orders.</li>
<li>Which also exacerbated cognitive biases</li>
</ul>
</aside>
</section>
<section class="slide level1">

<h2 id="loss-aversion">Loss aversion</h2>
<blockquote>
<p>We prefer avoiding losses to acquiring equivalent gains.</p>
</blockquote>
<aside class="notes">
<ul>
<li>Big reason for going with low hanging fruit</li>
<li>surprisingly, teams in dire need of migrating from unmaintained/buggy solutions, were also reluctant</li>
<li>They agreed that the situation was bad, but were never satisfied with our offering even though they agreed it was better.</li>
<li>They had invested a lot of time, in small nifty features.</li>
<li>These things didn’t seem important as they were minor things.</li>
<li>But our brains don’t work like that, we failed to pay attention, and they did not want to loose their useful features.</li>
</ul>
</aside>
</section>
<section class="slide level1">

<h2 id="ikea-effect">IKEA effect</h2>
<blockquote>
<p>We tend to place a disproportionately high value on products we’ve partially created.</p>
</blockquote>
<aside class="notes">
<ul>
<li>keeping the previous team in mind</li>
<li>they had created this tooling themselves</li>
<li>the IKEA effect probably also contributed to their unwillingness to on-board</li>
</ul>
</aside>
</section>
<section id="section-21" class="slide level1" data-background-image="static/dogfooding.jpg">
<h1 data-background-image="static/dogfooding.jpg"></h1>
<aside class="notes">
<ul>
<li>But not all biases are bad</li>
<li>Let’s say you’re buying a new car. It’s a bit expensive, but really nice.</li>
<li>‘I drive this car my self.’, Sales people use this argument all the time</li>
<li>Suddenly we trust their opinion more</li>
<li>This is often labeled as a logical fallacy, but there is some truth to this</li>
<li>Using the tools we make, is a great way to test, and improve them.</li>
<li>This makes us both early warning system, and experts</li>
</ul>
</aside>
</section>
<section id="section-22" class="slide level1" data-background-image="static/dogfooding_faded.jpg">
<h1 data-background-image="static/dogfooding_faded.jpg"></h1>
<h2 id="be-aware-though">Be aware though</h2>
<p>You have insight into the tools in a way a user never will.</p>
<aside class="notes">
<ul>
<li>You know the code, the integrations</li>
<li>You know where to report bugs, how to fix configuration</li>
<li>And speaking of support</li>
</ul>
</aside>
</section>
<section class="slide level1">

<h2 id="support">Support</h2>
<blockquote>
<p>We’ve started to on board teams and everything was going great! But suddenly they started asking questions, finding bugs and stealing all our time!</p>
</blockquote>
<p>- Some Platform Engineer probably</p>
<aside class="notes">
<ul>
<li>This isn’t a direct quote, but this could be how it feels</li>
<li>So we have to ask our selves.</li>
<li>How do users report problems?</li>
<li>How do these reports find the responsible person/team?</li>
<li>Who follows up on reports that span several teams?</li>
<li>Is this users responsibility, the teams or someone else?</li>
</ul>
</aside>
</section>
<section class="slide level1">

<h2 id="first-iteration-at-schibsted">First iteration at Schibsted</h2>
<ul>
<li>One Delivery team of 4 people</li>
<li>Artifactory, Travis, Spinnaker</li>
<li>We helped people on Slack</li>
</ul>
<aside class="notes">
<ul>
<li>We were extremely available</li>
<li>This worked great, we got lots of valuable feedback</li>
<li>Fast iterations, detailed bug reports, quick fixes</li>
<li>The user felt safe, because we were right there with them</li>
<li>Super fun!</li>
</ul>
</aside>
</section>
<section class="slide level1">

<h2 id="but-it-doesnt-scale">But it doesn’t scale</h2>
<p>A few months later, we were completely exhausted by constant interruptions</p>
<aside class="notes">
<ul>
<li>Repeated questions</li>
<li>Both development and support suffered a lot</li>
<li>Some users were getting really frustrated, as their tickets weren’t being handled</li>
<li>We, were getting frustrated as we were getting nowhere</li>
</ul>
</aside>
</section>
<section class="slide level1">

<h2 id="so-what-had-changed">So what had changed?</h2>
<ul>
<li>20 users increased to 500</li>
<li>We were no longer picking only low hanging fruits</li>
<li>And this is all perfectly natural</li>
</ul>
</section>
<section id="section-23" class="slide level1" data-background-image="static/white_knight.jpg">
<h1 data-background-image="static/white_knight.jpg"></h1>
<aside class="notes">
<ul>
<li>To our rescue, comes a white knight</li>
<li>We had recently gotten a dedicated manager</li>
<li>He helped us re-think our support setup</li>
</ul>
</aside>
</section>
<section id="section-24" class="slide level1" data-background-image="static/white_knight_faded.jpg">
<h1 data-background-image="static/white_knight_faded.jpg"></h1>
<h2 id="the-unified-support">The Unified Support</h2>
<ul>
<li><em>One</em> entrypoint</li>
<li>Slack only for dedicated support, and incidents</li>
<li>One call handles support routing</li>
</ul>
<aside class="notes">
<ul>
<li>He introduced the unified support</li>
<li>Letting users have one place to report bugs, for all services, all teams</li>
<li>At this time there were other teams handling some services. But users only see the front end. So that’s where they report the bugs.</li>
<li>Slack support channels became community channels instead.</li>
<li>In these channels user started taking on support, huge help!</li>
</ul>
</aside>
</section>
<section id="section-25" class="slide level1" data-background-image="static/full_speed.jpg">
<h1 data-background-image="static/full_speed.jpg"></h1>
<aside class="notes">
<ul>
<li>I’d like to end with this</li>
<li>The pit stop was an analogy we used a lot</li>
<li>We were the pit stop crew</li>
<li>Developers were the drivers</li>
<li>They knew where to stop</li>
<li>We know who should fix what</li>
<li>Quick fix, quick win</li>
</ul>
</aside>
</section>
<section id="section-26" class="slide level1" data-background-image="static/full_speed_faded.jpg">
<h1 data-background-image="static/full_speed_faded.jpg"></h1>
<h2 id="questions">Questions?</h2>
<p>Twitter/Github: <span class="citation" data-cites="brujoand">@brujoand</span></p>
<p>PS: Piano.io is hiring in Oslo!</p>
<aside class="notes">
<ul>
<li>Feel free to share your experiences, ask questions or disagree with me on</li>
<li>Shoot me a message if you want to learn more about working at Piano</li>
</ul>
</aside>
</section>
    </div>
  </div>

  <script src="../.reveal.js/dist/reveal.js"></script>

  // reveal.js plugins
  <script src="../.reveal.js/plugin/notes/notes.js"></script>
  <script src="../.reveal.js/plugin/search/search.js"></script>
  <script src="../.reveal.js/plugin/zoom/zoom.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
        // Display controls in the bottom right corner
        controls: false,
        // Display the page number of the current slide
        slideNumber: "c/t",
        // Push each slide change to the browser history
        history: true,
        // Vertical centering of slides
        center: true,
        // Transition style
        transition: 'slide', // none/fade/slide/convex/concave/zoom
        // Transition style for full page slide backgrounds
        backgroundTransition: 'fade', // none/fade/slide/convex/concave/zoom

        // reveal.js plugins
        plugins: [
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    </body>
</html>
